<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

	<head>
		<title>Movielist</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	</head>
	
	<body style="font-family: Arial">
		<div>
			<h1>List of movies</h1>
			<table>
				<tr>
					<th>Title</th>
					<th>Year</th>
					<th>Category</th>
					<th>Type</th>
					<th>Rating</th>
				</tr>
				<tr th:each = "movie : ${movies}">
					<td th:text="${movie.title}"></td>
					<td th:text="${movie.movieYear}"></td>
					<td th:text="${movie.category.name}"></td>
					<td th:text="${movie.movietype.name}"></td>
					<td th:text="${movie.rating}"></td>
    		 	<td sec:authorize="hasAuthority('ADMIN')"><a th:href="@{/editmovie/{id}(id=${movie.id})}">Edit</a></td> 
 				<td sec:authorize="hasAuthority('ADMIN')"><a th:href="@{/delete/{id}(id=${movie.id})}">Delete</a></td> 
				</tr>
			</table>
		</div>
		<div>
			<p>
				<th:block sec:authorize="hasAuthority('ADMIN')">
					<a href="/addmovie" class="btn btn-primary">Add new movie to the list</a>
				</th:block>
			</p>
		</div>
	</body>
</html>